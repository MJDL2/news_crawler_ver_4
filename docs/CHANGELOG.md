# 변경 이력 (Changelog)

이 프로젝트의 모든 주요 변경사항을 기록합니다.

## [4.1.5] - 2025-05-29 (10:30)

### 추가됨 (Added)
- 403 Forbidden 오류 대응 기능
  - 더 실제 브라우저와 유사한 헤더 추가 (Sec-Fetch-* 헤더 등)
  - 네이버 메인/검색 페이지 사전 방문으로 쿠키 획득
  - 환경 변수를 통한 프록시 지원 (HTTP_PROXY, HTTPS_PROXY)
  - 403 오류 시 상세 로깅 및 증가된 재시도 대기 시간
- 403 오류 해결 가이드 문서 추가 (403_ERROR_GUIDE.md)

### 개선됨 (Improved)
- 네트워크 요청 헤더 개선
  - Accept-Encoding, Cache-Control, Upgrade-Insecure-Requests 추가
  - Sec-Fetch-Dest, Sec-Fetch-Mode, Sec-Fetch-Site, Sec-Fetch-User 추가
- 크롤링 설정 기본값 조정
  - delay_between_requests: 1.0 → 2.5초 (crawler_config.json)
  - 페이지 진행에 따른 점진적 지연 시간 증가

### 문서화 (Documentation)
- 403 오류 해결 가이드 작성
  - 오류 원인 설명
  - 다양한 해결 방법 제시
  - 프록시 및 VPN 사용법 안내

## [4.1.4] - 2025-05-29 (10:10)

### 수정됨 (Fixed)
- DailyCollector datetime JSON 직렬화 오류 수정
  - NewsArticle의 asdict() 대신 to_dict() 메서드 사용
  - stats 딕셔너리의 start_time, end_time을 ISO 형식 문자열로 변환
  - "Object of type datetime is not JSON serializable" 오류 해결
- Windows 콘솔 체크마크(✓) 인코딩 오류 수정
  - crawler.py와 daily_collector.py의 체크마크를 [완료]로 변경
  - Windows cp949 코드페이지에서 표시 가능한 문자로 대체

### 테스트됨 (Tested)
- 날짜별 수집 기능 정상 작동 확인
  - 2일간 테스트: 70개 URL 수집, 6개 본문 추출 성공
  - 중간 결과 파일 정상 저장 확인

## [4.1.3] - 2025-05-28 (21:10)

### 수정됨 (Fixed)
- 날짜별 수집 기능 오류 수정
  - 일별 수집 제한이 전체 추출 제한으로 잘못 적용되던 문제 해결
  - daily_collect 옵션이 True일 때 content_limit을 0으로 설정
  - _daily_limit 옵션을 별도로 관리하여 일별 제한 적용
- DailyCollector 클래스 오류 수정
  - StorageConfig.root_dir 속성 오류 해결 (news_data_dir 사용)
  - extract_from_urls 메서드 오류 해결 (extract_content 사용)
  - 정렬 방식 및 뉴스 유형 매핑 추가
  - 중간 결과 저장 로직 수정

### 추가됨 (Added)
- CLI에서 DailyCollector 통합
  - 대화형 모드에서 날짜별 분할 수집 선택 시 자동으로 DailyCollector 사용
  - 일별 수집 현황 표시 기능
- 날짜별 수집 진행 상황 표시
  - 각 날짜별 수집 상태 실시간 표시
  - 전체 수집 통계 표시

### 개선됨 (Improved)
- 진행 상황 표시 개선
  - URL 수집 중 페이지별 진행 상황 표시
  - 본문 추출 중 개수 표시
  - 소요 시간 실시간 표시
  - flush=True 추가로 출력 버퍼링 문제 해결

## [4.1.2] - 2025-05-28 (20:40)

### 수정됨 (Fixed)
- Windows 콘솔 인코딩 문제 완전 해결
  - main.py에 Windows 전용 UTF-8 설정 추가
  - chcp 65001 자동 실행으로 코드 페이지 설정
  - PYTHONIOENCODING 환경 변수 자동 설정
  - PYTHONUNBUFFERED 환경 변수 추가
- 대화형 모드 옵션 매핑 문제 해결
  - interactive.py의 반환값을 CLI 형식으로 변환
  - 지연 시간 기본값 설정 추가
- 대화형 모드 입력 블로킹 문제 해결
  - 로깅이 input() 함수를 방해하는 문제 수정
  - 대화형 모드에서는 로깅 완전 비활성화
  - confirm_options 함수 간소화

### 추가됨 (Added)
- run_interactive.bat 파일 제공 (Windows 사용자용)
- run_interactive_v2.bat 파일 제공 (개선된 버전)
- run_interactive.ps1 PowerShell 스크립트 제공
- 크롤링 시작 시 사용자 알림 메시지 추가

### 개선됨 (Improved)
- Windows 환경에서 한글 입출력 안정성 향상
- 대화형 모드 실행 안정성 개선
- 로깅 처리 최적화

### 테스트됨 (Tested)
- 명령줄 인자 방식 정상 작동 확인
  - "테스트" 키워드로 1주 기간 수집
  - 23개 URL 수집, 3개 본문 추출 성공

## [4.1.0] - 2025-05-28 (오후)

### 개선됨 (Improved)
- 대화형 인터페이스 전면 개편
  - 복수 검색어 지원 (쉼표로 구분)
  - 언론사 선택 기능 추가 (전체/주요 언론사/직접 선택)
  - 수집과 추출 통합 옵션 (URL+본문 동시 수집)
  - 불필요한 옵션 제거 (페이지네이션, 6가지 뉴스 유형 등)
  - 질문 단계 간소화 (8단계 → 5단계)
  - 검색어별/언론사별 개별 수집 옵션 추가

### 변경됨 (Changed)
- 기본 수집 모드를 "전체 수집 (URL+본문)"으로 변경
- 일별 기사 수 제한을 기본 옵션으로 추가
- 1주 이상 기간 선택 시 날짜별 분할 수집 자동 제안

### 테스트됨 (Tested)
- "원전" 키워드로 20250515-20250528 기간 테스트 성공
  - 16개 URL 수집, 10개 본문 추출
  - 소요 시간: 21.59초
  - 오류 없이 안정적으로 작동

### 발견된 문제 (Known Issues)
- ~~Windows 콘솔 인코딩 문제 (데이터는 정상, 표시만 깨짐)~~ → v4.1.2에서 해결
- 대화형 인터페이스와 크롤러 연동 미완성 (CLI 레벨 수정 필요)

## [4.0.0] - 2025-05-28

### 추가됨 (Added)
- 전면적인 프로젝트 리팩토링 완료
- 모듈화된 아키텍처 구조 도입
- 계층화된 디렉토리 구조 (`src/core`, `src/models`, `src/ui`, `src/utils`)
- 의존성 주입 패턴 적용
- 통합 문서화 시스템

### 변경됨 (Changed)
- 순환 참조 문제 해결 (main.py ↔ daily_collector.py)
- 싱글톤 설정 관리 시스템으로 전환
- 모든 하드코딩된 값을 설정 파일로 이동
- 파일 구조 전면 개편

### 개선됨 (Improved)
- 코드 가독성 및 유지보수성 향상
- 모듈 간 결합도 감소
- 테스트 가능성 향상
- 에러 처리 로직 개선

## [3.5.0] - 2025-05-28

### 추가됨
- 중앙 집중식 설정 관리 클래스 (`Config`)
- JSON 기반 설정 파일 지원
- 네트워크, 저장소, 크롤링, UI 설정 분리
- 설정 파일 자동 생성 기능

### 변경됨
- 모든 모듈에서 `get_config()` 함수를 통한 설정 접근
- User-Agent, 타임아웃, 재시도 횟수 등 설정화

## [3.0.0] - 2025-05-21

### 추가됨
- 균등 추출 모드 (`balanced`, `per_date`)
- tqdm 기반 프로그레스 바
- 날짜별 수집 기능 확장 (모든 기간 옵션에서 사용 가능)
- 제목 유사도 기반 중복 기사 필터링
- 언론사 필터링 옵션

### 개선됨
- 사용자 인터페이스 전면 개편
- 로그 출력 간소화
- 날짜 메타데이터 추가

### 수정됨
- 날짜별 수집 시 빈 결과 처리 문제
- URL 추출 시 예외 처리 강화

## [2.5.0] - 2025-05-14

### 추가됨
- 본문 추출 제한 기능 (`--content-limit`)
- 배치 저장 시스템
- 추출 통계 표시

### 변경됨
- 파일명 형식 개선 (타임스탬프 기반)
- 대용량 처리를 위한 메모리 최적화

## [2.0.0] - 2025-05-07

### 추가됨
- 대화형 인터페이스 (`-i`, `--interactive`)
- 날짜별 분할 수집 기능
- 커스텀 기간 설정 옵션

### 개선됨
- URL 수집 로직 안정화
- HTML 파싱 정확도 향상

## [1.5.0] - 2025-04-30

### 추가됨
- 다양한 언론사 HTML 구조 대응
- 네이버 뉴스/원본 기사 구분
- 기자명 추출 기능

### 수정됨
- 일부 언론사 본문 추출 실패 문제
- 날짜 형식 파싱 오류

## [1.0.0] - 2025-04-23

### 최초 릴리스
- 네이버 뉴스 검색 URL 수집
- 뉴스 본문 추출
- 명령줄 인터페이스
- 기본 검색 옵션 (기간, 정렬, 유형)

---

각 버전의 형식은 [Semantic Versioning](https://semver.org/)을 따릅니다.

향후 계획과 현재 진행 상황은 [PROGRESS.md](./PROGRESS.md)를 참조하세요.